

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="ja" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="ja" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>ウォークスルー &mdash; Windows 10 で Vagrant を使う 2020/02/12 22:27 更新 ドキュメント</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../_static/translations.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="検索" href="../search.html" />
    <link rel="next" title="デフォルトの仮想マシンの仕様" href="../vms/vms.html" />
    <link rel="prev" title="ヘルプ" href="../help/help.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Windows 10 で Vagrant を使う
          

          
          </a>

          
            
            
              <div class="version">
                Last update on 02/12/2020
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../environment/environment.html">環境構築</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../environment/environment.html#environment-virtualbox">Oracle VirtualBox</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../environment/environment.html#environment-virtualbox-download">ダウンロード</a></li>
<li class="toctree-l3"><a class="reference internal" href="../environment/environment.html#environment-virtualbox-install">インストール</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../environment/environment.html#environment-vagrant">Vagrant</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../environment/environment.html#environment-vagrant-download">ダウンロード</a></li>
<li class="toctree-l3"><a class="reference internal" href="../environment/environment.html#environment-vagrant-install">インストール</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../words/words.html">用語</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../words/words.html#word-provider">プロバイダ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../words/words.html#word-provisioning">プロビジョニング</a></li>
<li class="toctree-l2"><a class="reference internal" href="../words/words.html#box">Box ファイル</a></li>
<li class="toctree-l2"><a class="reference internal" href="../words/words.html#vagrantfile">Vagrantfile</a></li>
<li class="toctree-l2"><a class="reference internal" href="../words/words.html#vagrant">Vagrant コマンド</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../command/command.html">主な Vagrant コマンド</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../command/command.html#command-about">コマンドとフォルダ／ファイルの関係図</a></li>
<li class="toctree-l2"><a class="reference internal" href="../command/command.html#command-list">コマンドリスト</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../command/command.html#box">Box ファイルの操作</a></li>
<li class="toctree-l3"><a class="reference internal" href="../command/command.html#command-list-vms">仮想マシンの操作</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../help/help.html">ヘルプ</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">ウォークスルー</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#vagrant">Vagrant 用のフォルダーを作成</a></li>
<li class="toctree-l2"><a class="reference internal" href="#box">Box ファイルをダウンロード</a></li>
<li class="toctree-l2"><a class="reference internal" href="#vagrantfile">Vagrantfile を作成</a></li>
<li class="toctree-l2"><a class="reference internal" href="#walkthrough-up">仮想マシンを起動</a></li>
<li class="toctree-l2"><a class="reference internal" href="#walkthrough-ssh">仮想マシンに接続</a></li>
<li class="toctree-l2"><a class="reference internal" href="#walkthrough-reload">仮想マシンを再起動</a></li>
<li class="toctree-l2"><a class="reference internal" href="#walkthrough-halt">仮想マシンを停止（シャットダウン）</a></li>
<li class="toctree-l2"><a class="reference internal" href="#walkthrough-suspend">仮想マシンをサスペンド</a></li>
<li class="toctree-l2"><a class="reference internal" href="#walkthrough-resume">仮想マシンをリジューム</a></li>
<li class="toctree-l2"><a class="reference internal" href="#walkthrough-status">仮想マシンの状態を表示</a></li>
<li class="toctree-l2"><a class="reference internal" href="#walkthrough-destroy">仮想マシンを削除</a></li>
<li class="toctree-l2"><a class="reference internal" href="#walkthrough-remove">Box ファイルを削除</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../vms/vms.html">デフォルトの仮想マシンの仕様</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../vms/vms.html#vms-hw">仮想マシン自体の仕様</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vms/vms.html#vms-sw">仮想マシンの仕様</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../vms/vms.html#id4">デフォルトアカウント</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vms/vms.html#id5">公開鍵認証</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../vagrantfile/vagrantfile.html">Vagrantfile の編集</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../vagrantfile/vagrantfile.html#vagrant-orignal">オリジナルの Vagrantfile</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vagrantfile/vagrantfile.html#vagrant-struct">Vagrantfile の構造</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vagrantfile/vagrantfile.html#vagrant-parameter">主なパラメーター</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../vagrantfile/vagrantfile.html#config-vm-box">config.vm.box</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vagrantfile/vagrantfile.html#config-vm-hostname">config.vm.hostname</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vagrantfile/vagrantfile.html#config-vm-network">config.vm.network</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vagrantfile/vagrantfile.html#vb-name">vb.name</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vagrantfile/vagrantfile.html#vb-gui">vb.gui</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vagrantfile/vagrantfile.html#vb-memory">vb.memory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vagrantfile/vagrantfile.html#vb-cpu">vb.cpu</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vagrantfile/vagrantfile.html#vb-customize">vb.customize</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../vagrantfile/vagrantfile.html#vagrant-sample">Vagrantfile の設定例</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../provisioning/provisioning.html">プロビジョニング</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../provisioning/provisioning.html#provisioning-about">プロビジョニングとは</a></li>
<li class="toctree-l2"><a class="reference internal" href="../provisioning/provisioning.html#provisioning-timing">実行タイミング</a></li>
<li class="toctree-l2"><a class="reference internal" href="../provisioning/provisioning.html#provisioning-basic">基本動作</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../provisioning/provisioning.html#vagrant-up"><code class="docutils literal notranslate"><span class="pre">vagrant</span> <span class="pre">up</span></code> の実行結果からプロビジョニングの動作確認</a></li>
<li class="toctree-l3"><a class="reference internal" href="../provisioning/provisioning.html#provision">--provision オプション</a></li>
<li class="toctree-l3"><a class="reference internal" href="../provisioning/provisioning.html#id7">プロビジョニングの常時実行</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../provisioning/provisioning.html#provisioning-shell">シェル</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../provisioning/provisioning.html#provisioning-shell-inline">インラインスクリプト</a></li>
<li class="toctree-l3"><a class="reference internal" href="../provisioning/provisioning.html#provisioning-shell-external">エクスターナルスクリプト</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../provisioning/provisioning.html#ansible">Ansible</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../package/package.html">BOX ファイルの作成</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../package/package.html#package-base">Box ファイルの元になる仮想マシンの作成</a></li>
<li class="toctree-l2"><a class="reference internal" href="../package/package.html#package-create">Box ファイルの作成</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../package/package.html#package-create-options">主なオプション</a></li>
<li class="toctree-l3"><a class="reference internal" href="../package/package.html#package-create-use">使用例</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../package/package.html#package-use">作成した Box ファイルの使用</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../package/package.html#package-use-list">Box ファイルの登録</a></li>
<li class="toctree-l3"><a class="reference internal" href="../package/package.html#package-use-exec">Box ファイルを元に仮想マシンを作成</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../multi/multi.html">複数の仮想マシンの操作</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../multi/multi.html#multi-define">仮想マシンの定義</a></li>
<li class="toctree-l2"><a class="reference internal" href="../multi/multi.html#multi-same">共通した定義の取り扱い</a></li>
<li class="toctree-l2"><a class="reference internal" href="../multi/multi.html#vagrant">Vagrant コマンド</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../appendix/appendix.html">付録</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../appendix/appendix-vbadditions.html">プラグインを使用した VB Guest Additions のインストール</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendix/appendix-vbmanual.html">VB Guest Additions の手動インストール</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendix/appendix-mac.html">IEEE が管理しているプライベート用 MAC アドレス（ 2020 年 2 月 9 日 確認）</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Windows 10 で Vagrant を使う</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>ウォークスルー</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="walkthrough">
<span id="id1"></span><h1>ウォークスルー<a class="headerlink" href="#walkthrough" title="このヘッドラインへのパーマリンク">¶</a></h1>
<p>Vagrant コマンドを実際に使用し、CentOS 7 の仮想マシンの作成から廃棄までを実行します。 Box ファイルは CentOS 公式の &quot;centos/7&quot; を使用します。</p>
<hr class="docutils" />
<div class="line-block">
<div class="line"><strong>【トピックス】</strong></div>
<div class="line">・ <a class="reference internal" href="#walkthrough-folder"><span class="std std-ref">Vagrant 用のフォルダーを作成</span></a></div>
<div class="line">・ <a class="reference internal" href="#walkthrough-box"><span class="std std-ref">Box ファイルをダウンロード</span></a></div>
<div class="line">・ <a class="reference internal" href="#walkthrough-init"><span class="std std-ref">Vagrantfile を作成</span></a></div>
<div class="line">・ <a class="reference internal" href="#walkthrough-up"><span class="std std-ref">仮想マシンを起動</span></a></div>
<div class="line">・ <a class="reference internal" href="#walkthrough-ssh"><span class="std std-ref">仮想マシンに接続</span></a></div>
<div class="line">・ <a class="reference internal" href="#walkthrough-reload"><span class="std std-ref">仮想マシンを再起動</span></a></div>
<div class="line">・ <a class="reference internal" href="#walkthrough-halt"><span class="std std-ref">仮想マシンを停止（シャットダウン）</span></a></div>
<div class="line">・ <a class="reference internal" href="#walkthrough-suspend"><span class="std std-ref">仮想マシンをサスペンド</span></a></div>
<div class="line">・ <a class="reference internal" href="#walkthrough-resume"><span class="std std-ref">仮想マシンをリジューム</span></a></div>
<div class="line">・ <a class="reference internal" href="#walkthrough-status"><span class="std std-ref">仮想マシンの状態を表示</span></a></div>
<div class="line">・ <a class="reference internal" href="#walkthrough-destroy"><span class="std std-ref">仮想マシンを削除</span></a></div>
<div class="line">・ <a class="reference internal" href="#walkthrough-remove"><span class="std std-ref">Box ファイルを削除</span></a></div>
</div>
<hr class="docutils" />
<div class="section" id="vagrant">
<span id="walkthrough-folder"></span><h2>Vagrant 用のフォルダーを作成<a class="headerlink" href="#vagrant" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Box ファイルごとにフォルダーが必要なので、次の構成でフォルダーを作成しました。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">c</span><span class="p">:</span>\<span class="n">vagrant</span>\<span class="n">centos7</span>
</pre></div>
</div>
<img alt="../_images/2020-02-01_16h13_34.png" src="../_images/2020-02-01_16h13_34.png" />
<hr class="docutils" />
</div>
<div class="section" id="box">
<span id="walkthrough-box"></span><h2>Box ファイルをダウンロード<a class="headerlink" href="#box" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>仮想マシンを作成するため Box ファイル &quot;centos/7&quot; をダウンロードします。今回は途中でプロバイダを確認されたので &quot;3) virtualbox&quot; を選択しました。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vagrant</span> <span class="n">box</span> <span class="nb">list</span>
<span class="n">vagrant</span> <span class="n">box</span> <span class="n">add</span> <span class="n">centos</span><span class="o">/</span><span class="mi">7</span>
<span class="n">vagrant</span> <span class="n">box</span> <span class="nb">list</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>PS C:\Users\user&gt; vagrant box list
There are no installed boxes! Use `vagrant box add` to add some.
PS C:\Users\user&gt;
PS C:\Users\user&gt; vagrant box add centos/7
==&gt; box: Loading metadata for box &#39;centos/7&#39;
    box: URL: https://vagrantcloud.com/centos/7
This box can work with multiple providers! The providers that it
can work with are listed below. Please review the list and choose
the provider you will be working with.

1) hyperv
2) libvirt
3) virtualbox
4) vmware_desktop

Enter your choice: 3
==&gt; box: Adding box &#39;centos/7&#39; (v1905.1) for provider: virtualbox
    box: Downloading: https://vagrantcloud.com/centos/boxes/7/versions/1905.1/providers/virtualbox.box
    box: Download redirected to host: cloud.centos.org
    box:
==&gt; box: Successfully added box &#39;centos/7&#39; (v1905.1) for &#39;virtualbox&#39;!
PS C:\Users\user&gt;
PS C:\Users\user&gt; vagrant box list
centos/7 (virtualbox, 1905.1)
PS C:\Users\user&gt;
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>Box ファイルのダウンロードはファイルのサイズや実行環境などにより数分程度を要します。</p>
</div>
<hr class="docutils" />
</div>
<div class="section" id="vagrantfile">
<span id="walkthrough-init"></span><h2>Vagrantfile を作成<a class="headerlink" href="#vagrantfile" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>作成したフォルダーで Vagrantfile を作成します。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">c</span><span class="p">:</span>\<span class="n">vagrant</span>\<span class="n">centos7</span>
<span class="n">vagrant</span> <span class="n">init</span> <span class="n">centos</span><span class="o">/</span><span class="mi">7</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>PS C:\Users\user&gt; cd C:\vagrant\centos7\
PS C:\vagrant\centos7&gt;
PS C:\vagrant\centos7&gt; vagrant init centos/7
A `Vagrantfile` has been placed in this directory. You are now
ready to `vagrant up` your first virtual environment! Please read
the comments in the Vagrantfile as well as documentation on
`vagrantup.com` for more information on using Vagrant.
PS C:\vagrant\centos7&gt;
</pre></div>
</div>
<p>フォルダー内に Vagrantfile が作成されました。</p>
<img alt="../_images/2020-02-01_16h44_20.png" src="../_images/2020-02-01_16h44_20.png" />
<hr class="docutils" />
</div>
<div class="section" id="walkthrough-up">
<span id="id2"></span><h2>仮想マシンを起動<a class="headerlink" href="#walkthrough-up" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Box ファイルと Vagrant ファイルが揃ったので、仮想マシンを起動します。起動時のメッセージは仮想マシンの状態を示す内容が多く、接続時の参考になります。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vagrant</span> <span class="n">up</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>PS C:\vagrant\centos7&gt; vagrant up
Bringing machine &#39;default&#39; up with &#39;virtualbox&#39; provider...
==&gt; default: Importing base box &#39;centos/7&#39;...
==&gt; default: Matching MAC address for NAT networking...
==&gt; default: Checking if box &#39;centos/7&#39; version &#39;1905.1&#39; is up to date...
==&gt; default: Setting the name of the VM: centos7_default_1580909693985_35672
==&gt; default: Clearing any previously set network interfaces...
==&gt; default: Preparing network interfaces based on configuration...
    default: Adapter 1: nat
==&gt; default: Forwarding ports...
    default: 22 (guest) =&gt; 2222 (host) (adapter 1)
==&gt; default: Booting VM...
==&gt; default: Waiting for machine to boot. This may take a few minutes...
    default: SSH address: 127.0.0.1:2222
    default: SSH username: vagrant
    default: SSH auth method: private key
    default:
    default: Vagrant insecure key detected. Vagrant will automatically replace
    default: this with a newly generated keypair for better security.
    default:
    default: Inserting generated public key within guest...
    default: Removing insecure key from the guest if it&#39;s present...
    default: Key inserted! Disconnecting and reconnecting using new SSH key...
==&gt; default: Machine booted and ready!
==&gt; default: Checking for guest additions in VM...
    default: No guest additions were detected on the base box for this VM! Guest
    default: additions are required for forwarded ports, shared folders, host only
    default: networking, and more. If SSH fails on this machine, please install
    default: the guest additions and repackage the box to continue.
    default:
    default: This is not an error message; everything may continue to work properly,
    default: in which case you may ignore this message.
==&gt; default: Rsyncing folder: /cygdrive/c/vagrant/centos7/ =&gt; /vagrant
PS C:\vagrant\centos7&gt;
</pre></div>
</div>
<p>プロンプトが表示された時点で VirtualBox は起動していないように見えますが、ヘッドレスモード（バックグラウンドで動作）しています。</p>
<img alt="../_images/2020-02-01_16h55_19.png" src="../_images/2020-02-01_16h55_19.png" />
<img alt="../_images/2020-02-01_17h00_09.png" src="../_images/2020-02-01_17h00_09.png" />
<p>Oracle VM VirtualBox マネージャーを起動すると、仮想マシンが動作していることがわかります。</p>
<img alt="../_images/2020-02-01_17h02_09.png" src="../_images/2020-02-01_17h02_09.png" />
<hr class="docutils" />
</div>
<div class="section" id="walkthrough-ssh">
<span id="id3"></span><h2>仮想マシンに接続<a class="headerlink" href="#walkthrough-ssh" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>仮想マシンが起動したので ssh 接続します。公開鍵認証で接続するためパスワードの入力は不要です。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vagrant</span> <span class="n">ssh</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>PS C:\vagrant\centos7&gt; vagrant ssh
[vagrant@localhost ~]$
[vagrant@localhost ~]$ hostname
localhost.localdomain
[vagrant@localhost ~]$
[vagrant@localhost ~]$ ip a
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host
       valid_lft forever preferred_lft forever
2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
    link/ether 52:54:00:8a:fe:e6 brd ff:ff:ff:ff:ff:ff
    inet 10.0.2.15/24 brd 10.0.2.255 scope global noprefixroute dynamic eth0
       valid_lft 86290sec preferred_lft 86290sec
    inet6 fe80::5054:ff:fe8a:fee6/64 scope link
       valid_lft forever preferred_lft forever
[vagrant@localhost ~]$
[vagrant@localhost ~]$ logout
Connection to 127.0.0.1 closed.
PS C:\vagrant\centos7&gt;
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="walkthrough-reload">
<span id="id4"></span><h2>仮想マシンを再起動<a class="headerlink" href="#walkthrough-reload" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>仮想マシンを再起動します。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vagrant</span> <span class="n">reload</span>
</pre></div>
</div>
<p>出力されたメッセージで shutdown　→　boot していることがわかります。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>PS C:\vagrant\centos7&gt; vagrant reload
==&gt; default: Attempting graceful shutdown of VM...
==&gt; default: Checking if box &#39;centos/7&#39; version &#39;1905.1&#39; is up to date...
==&gt; default: Clearing any previously set forwarded ports...
==&gt; default: Clearing any previously set network interfaces...
==&gt; default: Preparing network interfaces based on configuration...
    default: Adapter 1: nat
==&gt; default: Forwarding ports...
    default: 22 (guest) =&gt; 2222 (host) (adapter 1)
==&gt; default: Booting VM...
==&gt; default: Waiting for machine to boot. This may take a few minutes...
    default: SSH address: 127.0.0.1:2222
    default: SSH username: vagrant
    default: SSH auth method: private key
    default: Warning: Connection reset. Retrying...
    default: Warning: Connection aborted. Retrying...
    default: Warning: Remote connection disconnect. Retrying...
==&gt; default: Machine booted and ready!
==&gt; default: Checking for guest additions in VM...
    default: No guest additions were detected on the base box for this VM! Guest
    default: additions are required for forwarded ports, shared folders, host only
    default: networking, and more. If SSH fails on this machine, please install
    default: the guest additions and repackage the box to continue.
    default:
    default: This is not an error message; everything may continue to work properly,
    default: in which case you may ignore this message.
==&gt; default: Rsyncing folder: /cygdrive/c/vagrant/centos7/ =&gt; /vagrant
==&gt; default: Machine already provisioned. Run `vagrant provision` or use the `--provision`
==&gt; default: flag to force provisioning. Provisioners marked to run always will still run.
PS C:\vagrant\centos7&gt;
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="walkthrough-halt">
<span id="id5"></span><h2>仮想マシンを停止（シャットダウン）<a class="headerlink" href="#walkthrough-halt" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>仮想マシンを停止（シャットダウン）します。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vagrant</span> <span class="n">halt</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PS</span> <span class="n">C</span><span class="p">:</span>\<span class="n">vagrant</span>\<span class="n">centos7</span><span class="o">&gt;</span> <span class="n">vagrant</span> <span class="n">halt</span>
<span class="o">==&gt;</span> <span class="n">default</span><span class="p">:</span> <span class="n">Attempting</span> <span class="n">graceful</span> <span class="n">shutdown</span> <span class="n">of</span> <span class="n">VM</span><span class="o">...</span>
<span class="n">PS</span> <span class="n">C</span><span class="p">:</span>\<span class="n">vagrant</span>\<span class="n">centos7</span><span class="o">&gt;</span>
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="walkthrough-suspend">
<span id="id6"></span><h2>仮想マシンをサスペンド<a class="headerlink" href="#walkthrough-suspend" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>稼働中の仮想マシンをサスペンドします。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vagrant</span> <span class="n">suspend</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PS</span> <span class="n">C</span><span class="p">:</span>\<span class="n">vagrant</span>\<span class="n">centos7</span><span class="o">&gt;</span> <span class="n">vagrant</span> <span class="n">suspend</span>
<span class="o">==&gt;</span> <span class="n">default</span><span class="p">:</span> <span class="n">Saving</span> <span class="n">VM</span> <span class="n">state</span> <span class="ow">and</span> <span class="n">suspending</span> <span class="n">execution</span><span class="o">...</span>
<span class="n">PS</span> <span class="n">C</span><span class="p">:</span>\<span class="n">vagrant</span>\<span class="n">centos7</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Oracle VM VirtualBox マネージャーで確認すると、仮想マシンがサスペンドしていることがわかります。</p>
<img alt="../_images/2020-02-02_18h34_40.png" src="../_images/2020-02-02_18h34_40.png" />
<hr class="docutils" />
</div>
<div class="section" id="walkthrough-resume">
<span id="id7"></span><h2>仮想マシンをリジューム<a class="headerlink" href="#walkthrough-resume" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>サスペンド状態の仮想マシンをリジュームします。リジュームするコマンドは 2 つあります。どちらを実行しても結果は同じです。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vagrant</span> <span class="n">up</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>PS C:\vagrant\centos7&gt; vagrant up
Bringing machine &#39;default&#39; up with &#39;virtualbox&#39; provider...
==&gt; default: Checking if box &#39;centos/7&#39; version &#39;1905.1&#39; is up to date...
==&gt; default: Resuming suspended VM...
==&gt; default: Booting VM...
==&gt; default: Waiting for machine to boot. This may take a few minutes...
    default: SSH address: 127.0.0.1:2222
    default: SSH username: vagrant
    default: SSH auth method: private key
==&gt; default: Machine booted and ready!
==&gt; default: Machine already provisioned. Run `vagrant provision` or use the `--provision`
==&gt; default: flag to force provisioning. Provisioners marked to run always will still run.
PS C:\vagrant\centos7&gt;
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vagrant</span> <span class="n">resume</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>PS C:\vagrant\centos7&gt; vagrant resume
==&gt; default: Resuming suspended VM...
==&gt; default: Booting VM...
==&gt; default: Waiting for machine to boot. This may take a few minutes...
    default: SSH address: 127.0.0.1:2222
    default: SSH username: vagrant
    default: SSH auth method: private key
==&gt; default: Machine booted and ready!
==&gt; default: Machine already provisioned. Run `vagrant provision` or use the `--provision`
==&gt; default: flag to force provisioning. Provisioners marked to run always will still run.
PS C:\vagrant\centos7&gt;
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="walkthrough-status">
<span id="id8"></span><h2>仮想マシンの状態を表示<a class="headerlink" href="#walkthrough-status" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>仮想マシンの状態（ poweroff / running / saved ）を表示します。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vagrant</span> <span class="n">status</span>
<span class="n">vagrant</span> <span class="n">up</span>
<span class="n">vagrant</span> <span class="n">status</span>
<span class="n">vagrant</span> <span class="n">suspend</span>
<span class="n">vagrant</span> <span class="n">status</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>PS C:\vagrant\centos7&gt; vagrant status
Current machine states:

default                   poweroff (virtualbox)

The VM is powered off. To restart the VM, simply run `vagrant up`
PS C:\vagrant\centos7&gt;
PS C:\vagrant\centos7&gt; vagrant up
Bringing machine &#39;default&#39; up with &#39;virtualbox&#39; provider...
==&gt; default: Checking if box &#39;centos/7&#39; version &#39;1905.1&#39; is up to date...
==&gt; default: Clearing any previously set forwarded ports...
==&gt; default: Clearing any previously set network interfaces...
==&gt; default: Preparing network interfaces based on configuration...
    default: Adapter 1: nat
==&gt; default: Forwarding ports...
    default: 22 (guest) =&gt; 2222 (host) (adapter 1)
==&gt; default: Booting VM...
==&gt; default: Waiting for machine to boot. This may take a few minutes...
    default: SSH address: 127.0.0.1:2222
    default: SSH username: vagrant
    default: SSH auth method: private key
    default: Warning: Connection aborted. Retrying...
    default: Warning: Remote connection disconnect. Retrying...
    default: Warning: Connection reset. Retrying...
==&gt; default: Machine booted and ready!
==&gt; default: Checking for guest additions in VM...
    default: No guest additions were detected on the base box for this VM! Guest
    default: additions are required for forwarded ports, shared folders, host only
    default: networking, and more. If SSH fails on this machine, please install
    default: the guest additions and repackage the box to continue.
    default:
    default: This is not an error message; everything may continue to work properly,
    default: in which case you may ignore this message.
==&gt; default: Rsyncing folder: /cygdrive/c/vagrant/centos7/ =&gt; /vagrant
==&gt; default: Machine already provisioned. Run `vagrant provision` or use the `--provision`
==&gt; default: flag to force provisioning. Provisioners marked to run always will still run.
PS C:\vagrant\centos7&gt;
PS C:\vagrant\centos7&gt; vagrant status
Current machine states:

default                   running (virtualbox)

The VM is running. To stop this VM, you can run `vagrant halt` to
shut it down forcefully, or you can run `vagrant suspend` to simply
suspend the virtual machine. In either case, to restart it again,
simply run `vagrant up`.
PS C:\vagrant\centos7&gt;
PS C:\vagrant\centos7&gt; vagrant suspend
==&gt; default: Saving VM state and suspending execution...
PS C:\vagrant\centos7&gt;
PS C:\vagrant\centos7&gt; vagrant status
Current machine states:

default                   saved (virtualbox)

To resume this VM, simply run `vagrant up`.
PS C:\vagrant\centos7&gt;
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="walkthrough-destroy">
<span id="id9"></span><h2>仮想マシンを削除<a class="headerlink" href="#walkthrough-destroy" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>仮想マシンを削除します。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vagrant</span> <span class="n">destroy</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>PS C:\vagrant\centos7&gt; vagrant destroy
    default: Are you sure you want to destroy the &#39;default&#39; VM? [y/N] y
==&gt; default: Destroying VM and associated drives...
PS C:\vagrant\centos7&gt;
</pre></div>
</div>
<p>Oracle VM VirtualBox マネージャーで確認すると、仮想マシンが削除されたことがわかります。</p>
<img alt="../_images/2020-02-02_12h44_53.png" src="../_images/2020-02-02_12h44_53.png" />
<hr class="docutils" />
</div>
<div class="section" id="walkthrough-remove">
<span id="id10"></span><h2>Box ファイルを削除<a class="headerlink" href="#walkthrough-remove" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>ダウンロードした Box ファイル &quot;centos/7&quot; を削除します。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vagrant</span> <span class="n">box</span> <span class="nb">list</span>
<span class="n">vagrant</span> <span class="n">box</span> <span class="n">remove</span> <span class="n">centos</span><span class="o">/</span><span class="mi">7</span>
<span class="n">vagrant</span> <span class="n">box</span> <span class="nb">list</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>PS C:\vagrant\centos7&gt; vagrant box list
centos/7 (virtualbox, 1905.1)
PS C:\vagrant\centos7&gt;
PS C:\vagrant\centos7&gt; vagrant box remove centos/7
Box &#39;centos/7&#39; (v1905.1) with provider &#39;virtualbox&#39; appears
to still be in use by at least one Vagrant environment. Removing
the box could corrupt the environment. We recommend destroying
these environments first:

default (ID: ec6eabdbc2834c4c813ae0bde08edc95)

Are you sure you want to remove this box? [y/N] y
Removing box &#39;centos/7&#39; (v1905.1) with provider &#39;virtualbox&#39;...
PS C:\vagrant\centos7&gt;
PS C:\vagrant\centos7&gt; vagrant box list
There are no installed boxes! Use `vagrant box add` to add some.
PS C:\vagrant\centos7&gt;
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../vms/vms.html" class="btn btn-neutral float-right" title="デフォルトの仮想マシンの仕様" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../help/help.html" class="btn btn-neutral float-left" title="ヘルプ" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Yoichi Muraoka

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>