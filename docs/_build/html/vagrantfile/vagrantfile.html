

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="ja" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="ja" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Vagrantfile の編集 &mdash; Windows 10 で Vagrant を使う 2020/02/13 23:16 更新 ドキュメント</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/translations.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="検索" href="../search.html" />
    <link rel="next" title="プロビジョニング" href="../provisioning/provisioning.html" />
    <link rel="prev" title="デフォルトの仮想マシンの仕様" href="../vms/vms.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Windows 10 で Vagrant を使う
          

          
          </a>

          
            
            
              <div class="version">
                Last update on 02/13/2020
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../environment/environment.html">環境構築</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../environment/environment.html#environment-virtualbox">Oracle VirtualBox</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../environment/environment.html#environment-virtualbox-download">ダウンロード</a></li>
<li class="toctree-l3"><a class="reference internal" href="../environment/environment.html#environment-virtualbox-install">インストール</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../environment/environment.html#environment-vagrant">Vagrant</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../environment/environment.html#environment-vagrant-download">ダウンロード</a></li>
<li class="toctree-l3"><a class="reference internal" href="../environment/environment.html#environment-vagrant-install">インストール</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../words/words.html">用語</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../words/words.html#word-provider">プロバイダ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../words/words.html#word-provisioning">プロビジョニング</a></li>
<li class="toctree-l2"><a class="reference internal" href="../words/words.html#box">Box ファイル</a></li>
<li class="toctree-l2"><a class="reference internal" href="../words/words.html#vagrantfile">Vagrantfile</a></li>
<li class="toctree-l2"><a class="reference internal" href="../words/words.html#vagrant">Vagrant コマンド</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../command/command.html">主な Vagrant コマンド</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../command/command.html#command-about">コマンドとフォルダ／ファイルの関係図</a></li>
<li class="toctree-l2"><a class="reference internal" href="../command/command.html#command-list">コマンドリスト</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../command/command.html#box">Box ファイルの操作</a></li>
<li class="toctree-l3"><a class="reference internal" href="../command/command.html#command-list-vms">仮想マシンの操作</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../help/help.html">ヘルプ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../walkthrough/walkthrough.html">ウォークスルー</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../walkthrough/walkthrough.html#vagrant">Vagrant 用のフォルダーを作成</a></li>
<li class="toctree-l2"><a class="reference internal" href="../walkthrough/walkthrough.html#box">Box ファイルをダウンロード</a></li>
<li class="toctree-l2"><a class="reference internal" href="../walkthrough/walkthrough.html#vagrantfile">Vagrantfile を作成</a></li>
<li class="toctree-l2"><a class="reference internal" href="../walkthrough/walkthrough.html#walkthrough-up">仮想マシンを起動</a></li>
<li class="toctree-l2"><a class="reference internal" href="../walkthrough/walkthrough.html#walkthrough-ssh">仮想マシンに接続</a></li>
<li class="toctree-l2"><a class="reference internal" href="../walkthrough/walkthrough.html#walkthrough-reload">仮想マシンを再起動</a></li>
<li class="toctree-l2"><a class="reference internal" href="../walkthrough/walkthrough.html#walkthrough-halt">仮想マシンを停止（シャットダウン）</a></li>
<li class="toctree-l2"><a class="reference internal" href="../walkthrough/walkthrough.html#walkthrough-suspend">仮想マシンをサスペンド</a></li>
<li class="toctree-l2"><a class="reference internal" href="../walkthrough/walkthrough.html#walkthrough-resume">仮想マシンをリジューム</a></li>
<li class="toctree-l2"><a class="reference internal" href="../walkthrough/walkthrough.html#walkthrough-status">仮想マシンの状態を表示</a></li>
<li class="toctree-l2"><a class="reference internal" href="../walkthrough/walkthrough.html#walkthrough-destroy">仮想マシンを削除</a></li>
<li class="toctree-l2"><a class="reference internal" href="../walkthrough/walkthrough.html#walkthrough-remove">Box ファイルを削除</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../vms/vms.html">デフォルトの仮想マシンの仕様</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../vms/vms.html#vms-hw">仮想マシン自体の仕様</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vms/vms.html#vms-sw">仮想マシンの仕様</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../vms/vms.html#id4">デフォルトアカウント</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vms/vms.html#id5">公開鍵認証</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Vagrantfile の編集</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#vagrant-orignal">オリジナルの Vagrantfile</a></li>
<li class="toctree-l2"><a class="reference internal" href="#vagrant-struct">Vagrantfile の構造</a></li>
<li class="toctree-l2"><a class="reference internal" href="#vagrant-parameter">主なパラメーター</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#config-vm-box">config.vm.box</a></li>
<li class="toctree-l3"><a class="reference internal" href="#config-vm-hostname">config.vm.hostname</a></li>
<li class="toctree-l3"><a class="reference internal" href="#config-vm-network">config.vm.network</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vb-name">vb.name</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vb-gui">vb.gui</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vb-memory">vb.memory</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vb-cpu">vb.cpu</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vb-customize">vb.customize</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#vagrant-sample">Vagrantfile の設定例</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../provisioning/provisioning.html">プロビジョニング</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../provisioning/provisioning.html#provisioning-about">プロビジョニングとは</a></li>
<li class="toctree-l2"><a class="reference internal" href="../provisioning/provisioning.html#provisioning-timing">実行タイミング</a></li>
<li class="toctree-l2"><a class="reference internal" href="../provisioning/provisioning.html#provisioning-basic">基本動作</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../provisioning/provisioning.html#vagrant-up"><code class="docutils literal notranslate"><span class="pre">vagrant</span> <span class="pre">up</span></code> の実行結果からプロビジョニングの動作確認</a></li>
<li class="toctree-l3"><a class="reference internal" href="../provisioning/provisioning.html#provision">--provision オプション</a></li>
<li class="toctree-l3"><a class="reference internal" href="../provisioning/provisioning.html#id7">プロビジョニングの常時実行</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../provisioning/provisioning.html#provisioning-shell">シェル</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../provisioning/provisioning.html#provisioning-shell-inline">インラインスクリプト</a></li>
<li class="toctree-l3"><a class="reference internal" href="../provisioning/provisioning.html#provisioning-shell-external">エクスターナルスクリプト</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../provisioning/provisioning.html#ansible">Ansible</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../package/package.html">BOX ファイルの作成</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../package/package.html#package-base">Box ファイルの元になる仮想マシンの作成</a></li>
<li class="toctree-l2"><a class="reference internal" href="../package/package.html#package-create">Box ファイルの作成</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../package/package.html#package-create-options">主なオプション</a></li>
<li class="toctree-l3"><a class="reference internal" href="../package/package.html#package-create-use">使用例</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../package/package.html#package-use">作成した Box ファイルの使用</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../package/package.html#package-use-list">Box ファイルの登録</a></li>
<li class="toctree-l3"><a class="reference internal" href="../package/package.html#package-use-exec">Box ファイルを元に仮想マシンを作成</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../multi/multi.html">複数の仮想マシンの操作</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../multi/multi.html#multi-define">仮想マシンの定義</a></li>
<li class="toctree-l2"><a class="reference internal" href="../multi/multi.html#multi-same">共通した定義の取り扱い</a></li>
<li class="toctree-l2"><a class="reference internal" href="../multi/multi.html#vagrant">Vagrant コマンド</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../appendix/appendix.html">付録</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../appendix/appendix-vbadditions.html">プラグインを使用した VB Guest Additions のインストール</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendix/appendix-vbmanual.html">VB Guest Additions の手動インストール</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendix/appendix-mac.html">IEEE が管理しているプライベート用 MAC アドレス（ 2020 年 2 月 9 日 確認）</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Windows 10 で Vagrant を使う</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Vagrantfile の編集</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="vagrantfile">
<span id="id1"></span><h1>Vagrantfile の編集<a class="headerlink" href="#vagrantfile" title="このヘッドラインへのパーマリンク">¶</a></h1>
<p>Vagrantfile を編集し、オリジナルの仮想マシンを作成します。</p>
<hr class="docutils" />
<div class="line-block">
<div class="line"><strong>【トピックス】</strong></div>
<div class="line">・ <a class="reference internal" href="#vagrant-orignal"><span class="std std-ref">オリジナルの Vagrantfile</span></a></div>
<div class="line">・ <a class="reference internal" href="#vagrant-struct"><span class="std std-ref">Vagrantfile の構造</span></a></div>
<div class="line">・ <a class="reference internal" href="#vagrant-parameter"><span class="std std-ref">主なパラメーター</span></a></div>
<div class="line">　　・ <a class="reference internal" href="#vagrant-parameter-vmbox"><span class="std std-ref">config.vm.box</span></a></div>
<div class="line">　　・ <a class="reference internal" href="#vagrant-parameter-hostname"><span class="std std-ref">config.vm.hostname</span></a></div>
<div class="line">　　・ <a class="reference internal" href="#vagrant-parameter-vmnetwork"><span class="std std-ref">config.vm.network</span></a></div>
<div class="line">　　・ <a class="reference internal" href="#vagrant-parameter-vbname"><span class="std std-ref">vb.name</span></a></div>
<div class="line">　　・ <a class="reference internal" href="#vagrant-parameter-vbgui"><span class="std std-ref">vb.gui</span></a></div>
<div class="line">　　・ <a class="reference internal" href="#vagrant-parameter-vbmemory"><span class="std std-ref">vb.memory</span></a></div>
<div class="line">　　・ <a class="reference internal" href="#vagrant-parameter-vbcpu"><span class="std std-ref">vb.cpu</span></a></div>
<div class="line">　　・ <a class="reference internal" href="#vagrant-parameter-vbcustomize"><span class="std std-ref">vb.customize</span></a></div>
<div class="line">・ <a class="reference internal" href="#vagrant-sample"><span class="std std-ref">Vagrantfile の設定例</span></a></div>
</div>
<hr class="docutils" />
<div class="section" id="vagrant-orignal">
<span id="id2"></span><h2>オリジナルの Vagrantfile<a class="headerlink" href="#vagrant-orignal" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">vagrant</span> <span class="pre">init</span></code>コマンドで作成した Vagrantfile の内容です。 Box ファイルは &quot;centos/7&quot; です。</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># -*- mode: ruby -*-
# vi: set ft=ruby :

# All Vagrant configuration is done below. The &quot;2&quot; in Vagrant.configure
# configures the configuration version (we support older styles for
# backwards compatibility). Please don&#39;t change it unless you know what
# you&#39;re doing.
Vagrant.configure(&quot;2&quot;) do |config|
  # The most common configuration options are documented and commented below.
  # For a complete reference, please see the online documentation at
  # https://docs.vagrantup.com.

  # Every Vagrant development environment requires a box. You can search for
  # boxes at https://vagrantcloud.com/search.
  config.vm.box = &quot;centos/7&quot;

  # Disable automatic box update checking. If you disable this, then
  # boxes will only be checked for updates when the user runs
  # `vagrant box outdated`. This is not recommended.
  # config.vm.box_check_update = false

  # Create a forwarded port mapping which allows access to a specific port
  # within the machine from a port on the host machine. In the example below,
  # accessing &quot;localhost:8080&quot; will access port 80 on the guest machine.
  # NOTE: This will enable public access to the opened port
  # config.vm.network &quot;forwarded_port&quot;, guest: 80, host: 8080

  # Create a forwarded port mapping which allows access to a specific port
  # within the machine from a port on the host machine and only allow access
  # via 127.0.0.1 to disable public access
  # config.vm.network &quot;forwarded_port&quot;, guest: 80, host: 8080, host_ip: &quot;127.0.0.1&quot;

  # Create a private network, which allows host-only access to the machine
  # using a specific IP.
  # config.vm.network &quot;private_network&quot;, ip: &quot;192.168.33.10&quot;

  # Create a public network, which generally matched to bridged network.
  # Bridged networks make the machine appear as another physical device on
  # your network.
  # config.vm.network &quot;public_network&quot;

  # Share an additional folder to the guest VM. The first argument is
  # the path on the host to the actual folder. The second argument is
  # the path on the guest to mount the folder. And the optional third
  # argument is a set of non-required options.
  # config.vm.synced_folder &quot;../data&quot;, &quot;/vagrant_data&quot;

  # Provider-specific configuration so you can fine-tune various
  # backing providers for Vagrant. These expose provider-specific options.
  # Example for VirtualBox:
  #
  # config.vm.provider &quot;virtualbox&quot; do |vb|
  #   # Display the VirtualBox GUI when booting the machine
  #   vb.gui = true
  #
  #   # Customize the amount of memory on the VM:
  #   vb.memory = &quot;1024&quot;
  # end
  #
  # View the documentation for the provider you are using for more
  # information on available options.

  # Enable provisioning with a shell script. Additional provisioners such as
  # Ansible, Chef, Docker, Puppet and Salt are also available. Please see the
  # documentation for more information about their specific syntax and use.
  # config.vm.provision &quot;shell&quot;, inline: &lt;&lt;-SHELL
  #   apt-get update
  #   apt-get install -y apache2
  # SHELL
end
</pre></div>
</div>
<p>コメントを除いた内容です。</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Vagrant.configure(&quot;2&quot;) do |config|
  config.vm.box = &quot;centos/7&quot;
end
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="vagrant-struct">
<span id="id3"></span><h2>Vagrantfile の構造<a class="headerlink" href="#vagrant-struct" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Vagrantfile の構造です。</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Vagrant.configure(&quot;2&quot;) do |config|
   パラメーター
end
</pre></div>
</div>
<p>1 行目は Vagrant のどのバージョン用の Vagrantfile なのかを示します。現行の Vagrant は Ver.2 なので 1 行目は次のようになります。</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Vagrant.configure(&quot;2&quot;) do |config|
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="vagrant-parameter">
<span id="id4"></span><h2>主なパラメーター<a class="headerlink" href="#vagrant-parameter" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="config-vm-box">
<span id="vagrant-parameter-vmbox"></span><h3>config.vm.box<a class="headerlink" href="#config-vm-box" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>Box ファイル名を指定します。</p></li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>config.vm.box = &quot;centos/7&quot;
</pre></div>
</div>
</div>
<div class="section" id="config-vm-hostname">
<span id="vagrant-parameter-hostname"></span><h3>config.vm.hostname<a class="headerlink" href="#config-vm-hostname" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>仮想マシンのホスト名を指定する。</p></li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>config.vm.hostname = &quot;node1&quot;
</pre></div>
</div>
</div>
<div class="section" id="config-vm-network">
<span id="vagrant-parameter-vmnetwork"></span><h3>config.vm.network<a class="headerlink" href="#config-vm-network" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p>仮想マシンのネットワークへの接続形態や IPアドレスを指定します。</p></li>
<li><p>デフォルト（本パラメーターを指定しない）は NAT です。</p></li>
<li><p>接続形態別設定</p>
<blockquote>
<div><ul class="simple">
<li><p>ブリッジ接続 &amp; DHCP</p></li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>config.vm.network &quot;public_network&quot;
</pre></div>
</div>
<ul class="simple">
<li><p>ブリッジ接続 &amp; Static IP</p></li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>config.vm.network &quot;public_network&quot;, ip &quot;192.168.0.1&quot;
</pre></div>
</div>
<ul class="simple">
<li><p>ブリッジ接続 &amp; MAC アドレス指定</p></li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>config.vm.network &quot;public_network&quot;, mac: &quot;080027000001&quot;
</pre></div>
</div>
<ul class="simple">
<li><p>ブリッジ接続 &amp; MAC アドレス指定 &amp; Static IP</p></li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>config.vm.network &quot;public_network&quot;, mac: &quot;080027000001&quot;, ip: &quot;192.168.10.1&quot;
</pre></div>
</div>
<ul class="simple">
<li><p>内部ネットワーク &amp; 内部ネットワーク名：intnet （デフォルト） &amp; MAC アドレス指定 &amp; Static IP</p></li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>config.vm.network &quot;private_network&quot;, mac: &quot;080027000001&quot;, ip: &quot;192.168.10.1&quot;, virtualbox__intnet: true
</pre></div>
</div>
<ul class="simple">
<li><p>内部ネットワーク &amp; 内部ネットワーク名：mynetwork &amp; MAC アドレス指定 &amp; Static IP</p></li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>config.vm.network &quot;private_network&quot;, mac: &quot;080027000001&quot;, ip: &quot;192.168.10.1&quot;, virtualbox__intnet: &quot;mynetwork&quot;
</pre></div>
</div>
<div class="admonition caution">
<p class="admonition-title">ご用心</p>
<ul class="simple">
<li><p>VirtualBox の内部ネットワークは DHCP サーバーが存在しない（ VirtualBox の仕様）ため、 Vagrantfile で static ip を設定する</p></li>
<li><p>VirtualBox の内部ネットワークの VM を起動後に手動で IP アドレスを指定しても Vagrantfile の設定で上書きされる</p></li>
</ul>
</div>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="vb-name">
<span id="vagrant-parameter-vbname"></span><h3>vb.name<a class="headerlink" href="#vb-name" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>仮想マシン名を指定します。</p></li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>config.vm.provider &quot;virtualbox&quot; do |vb|
   vb.name = &quot;testsv&quot;
end
</pre></div>
</div>
</div>
<div class="section" id="vb-gui">
<span id="vagrant-parameter-vbgui"></span><h3>vb.gui<a class="headerlink" href="#vb-gui" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>VirtualBox の起動モードを指定する。</p></li>
<li><p>指定がないときはヘッドレスモードで起動する。</p></li>
<li><p>GUI モードで起動（コンソールを起動）する。</p></li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>config.vm.provider &quot;virtualbox&quot; do |vb|
   vb.gui = true
end
</pre></div>
</div>
</div>
<div class="section" id="vb-memory">
<span id="vagrant-parameter-vbmemory"></span><h3>vb.memory<a class="headerlink" href="#vb-memory" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>仮想マシンのメモリサイズを MB （メガバイト）で指定します。</p></li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>config.vm.provider &quot;virtualbox&quot; do |vb|
   vb.memory = &quot;1024&quot;
end
</pre></div>
</div>
</div>
<div class="section" id="vb-cpu">
<span id="vagrant-parameter-vbcpu"></span><h3>vb.cpu<a class="headerlink" href="#vb-cpu" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>仮想マシンの CPU の数を指定します。</p></li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>config.vm.provider &quot;virtualbox&quot; do |vb|
  vb.cpus = 2
  vb.customize [
    &quot;modifyvm&quot;, :id,
    &quot;--ioapic&quot;, &quot;on&quot;
  ]
end
</pre></div>
</div>
</div>
<div class="section" id="vb-customize">
<span id="vagrant-parameter-vbcustomize"></span><h3>vb.customize<a class="headerlink" href="#vb-customize" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>仮想マシンのカスタマイズを指定します。</p></li>
<li><p>（たぶん）<code class="docutils literal notranslate"><span class="pre">VBoxManage.exe</span> <span class="pre">modifyvm</span></code>で設定できることはこのパラメーターで指定できる（と思う）。</p></li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>config.vm.provider &quot;virtualbox&quot; do |vb|
  vb.customize [
    &quot;modifyvm&quot;, :id,
    &quot;--graphicscontroller&quot;, &quot;vmsvga&quot;
  ]
end
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>PS C:\Program Files\Oracle\VirtualBox&gt; ./VBoxManage.exe modifyvm
Usage:

VBoxManage modifyvm         &lt;uuid|vmname&gt;
                            [--name &lt;name&gt;]
                            [--groups &lt;group&gt;, ...]
                            [--description &lt;desc&gt;]
                            [--ostype &lt;ostype&gt;]
                            [--iconfile &lt;filename&gt;]
                            [--memory &lt;memorysize in MB&gt;]
                            [--pagefusion on|off]
                            [--vram &lt;vramsize in MB&gt;]
                            [--acpi on|off]
                            [--ioapic on|off]
                            [--hpet on|off]
                            [--triplefaultreset on|off]
                            [--apic on|off]
                            [--x2apic on|off]
                            [--paravirtprovider none|default|legacy|minimal|
                                                hyperv|kvm]
                            [--paravirtdebug &lt;key=value&gt; [,&lt;key=value&gt; ...]]
                            [--hwvirtex on|off]
                            [--nestedpaging on|off]
                            [--largepages on|off]
                            [--vtxvpid on|off]
                            [--vtxux on|off]
                            [--pae on|off]
                            [--longmode on|off]
                            [--ibpb-on-vm-exit on|off]
                            [--ibpb-on-vm-entry on|off]
                            [--spec-ctrl on|off]
                            [--l1d-flush-on-sched on|off]
                            [--l1d-flush-on-vm-entry on|off]
                            [--mds-clear-on-sched on|off]
                            [--mds-clear-on-vm-entry on|off]
                            [--nested-hw-virt on|off]
                            [--cpu-profile &quot;host|Intel 80[86|286|386]&quot;]
                            [--cpuid-portability-level &lt;0..3&gt;]
                            [--cpuid-set &lt;leaf[:subleaf]&gt; &lt;eax&gt; &lt;ebx&gt; &lt;ecx&gt; &lt;edx&gt;]
                            [--cpuid-remove &lt;leaf[:subleaf]&gt;]
                            [--cpuidremoveall]
                            [--hardwareuuid &lt;uuid&gt;]
                            [--cpus &lt;number&gt;]
                            [--cpuhotplug on|off]
                            [--plugcpu &lt;id&gt;]
                            [--unplugcpu &lt;id&gt;]
                            [--cpuexecutioncap &lt;1-100&gt;]
                            [--rtcuseutc on|off]
                            [--graphicscontroller none|vboxvga|vmsvga|vboxsvga]
                            [--monitorcount &lt;number&gt;]
                            [--accelerate3d on|off]
                            [--accelerate2dvideo on|off]
                            [--firmware bios|efi|efi32|efi64]
                            [--chipset ich9|piix3]
                            [--bioslogofadein on|off]
                            [--bioslogofadeout on|off]
                            [--bioslogodisplaytime &lt;msec&gt;]
                            [--bioslogoimagepath &lt;imagepath&gt;]
                            [--biosbootmenu disabled|menuonly|messageandmenu]
                            [--biosapic disabled|apic|x2apic]
                            [--biossystemtimeoffset &lt;msec&gt;]
                            [--biospxedebug on|off]
                            [--system-uuid-le on|off]
                            [--boot&lt;1-4&gt; none|floppy|dvd|disk|net&gt;]
                            [--nic&lt;1-N&gt; none|null|nat|bridged|intnet|hostonly|
                                        generic|natnetwork]
                            [--nictype&lt;1-N&gt; Am79C970A|Am79C973|Am79C960|
                                            82540EM|82543GC|82545EM|
                                            virtio]
                            [--cableconnected&lt;1-N&gt; on|off]
                            [--nictrace&lt;1-N&gt; on|off]
                            [--nictracefile&lt;1-N&gt; &lt;filename&gt;]
                            [--nicproperty&lt;1-N&gt; name=[value]]
                            [--nicspeed&lt;1-N&gt; &lt;kbps&gt;]
                            [--nicbootprio&lt;1-N&gt; &lt;priority&gt;]
                            [--nicpromisc&lt;1-N&gt; deny|allow-vms|allow-all]
                            [--nicbandwidthgroup&lt;1-N&gt; none|&lt;name&gt;]
                            [--bridgeadapter&lt;1-N&gt; none|&lt;devicename&gt;]
                            [--hostonlyadapter&lt;1-N&gt; none|&lt;devicename&gt;]
                            [--intnet&lt;1-N&gt; &lt;network name&gt;]
                            [--nat-network&lt;1-N&gt; &lt;network name&gt;]
                            [--nicgenericdrv&lt;1-N&gt; &lt;driver&gt;]
                            [--natnet&lt;1-N&gt; &lt;network&gt;|default]
                            [--natsettings&lt;1-N&gt; [&lt;mtu&gt;],[&lt;socksnd&gt;],
                                                [&lt;sockrcv&gt;],[&lt;tcpsnd&gt;],
                                                [&lt;tcprcv&gt;]]
                            [--natpf&lt;1-N&gt; [&lt;rulename&gt;],tcp|udp,[&lt;hostip&gt;],
                                          &lt;hostport&gt;,[&lt;guestip&gt;],&lt;guestport&gt;]
                            [--natpf&lt;1-N&gt; delete &lt;rulename&gt;]
                            [--nattftpprefix&lt;1-N&gt; &lt;prefix&gt;]
                            [--nattftpfile&lt;1-N&gt; &lt;file&gt;]
                            [--nattftpserver&lt;1-N&gt; &lt;ip&gt;]
                            [--natbindip&lt;1-N&gt; &lt;ip&gt;]
                            [--natdnspassdomain&lt;1-N&gt; on|off]
                            [--natdnsproxy&lt;1-N&gt; on|off]
                            [--natdnshostresolver&lt;1-N&gt; on|off]
                            [--nataliasmode&lt;1-N&gt; default|[log],[proxyonly],
                                                         [sameports]]
                            [--macaddress&lt;1-N&gt; auto|&lt;mac&gt;]
                            [--mouse ps2|usb|usbtablet|usbmultitouch]
                            [--keyboard ps2|usb]
                            [--uart&lt;1-N&gt; off|&lt;I/O base&gt; &lt;IRQ&gt;]
                            [--uartmode&lt;1-N&gt; disconnected|
                                             server &lt;pipe&gt;|
                                             client &lt;pipe&gt;|
                                             tcpserver &lt;port&gt;|
                                             tcpclient &lt;hostname:port&gt;|
                                             file &lt;file&gt;|
                                             &lt;devicename&gt;]
                            [--uarttype&lt;1-N&gt; 16450|16550A|16750]
                            [--lpt&lt;1-N&gt; off|&lt;I/O base&gt; &lt;IRQ&gt;]
                            [--lptmode&lt;1-N&gt; &lt;devicename&gt;]
                            [--guestmemoryballoon &lt;balloonsize in MB&gt;]
                            [--vm-process-priority default|flat|low|normal|high]
                            [--audio none|null|dsound]
                            [--audioin on|off]
                            [--audioout on|off]
                            [--audiocontroller ac97|hda|sb16]
                            [--audiocodec stac9700|ad1980|stac9221|sb16]
                            [--clipboard-mode disabled|hosttoguest|guesttohost|
                                              bidirectional]
                            [--draganddrop disabled|hosttoguest|guesttohost|
                                           bidirectional]
                            [--vrde on|off]
                            [--vrdeextpack default|&lt;name&gt;]
                            [--vrdeproperty &lt;name=[value]&gt;]
                            [--vrdeport &lt;hostport&gt;]
                            [--vrdeaddress &lt;hostip&gt;]
                            [--vrdeauthtype null|external|guest]
                            [--vrdeauthlibrary default|&lt;name&gt;]
                            [--vrdemulticon on|off]
                            [--vrdereusecon on|off]
                            [--vrdevideochannel on|off]
                            [--vrdevideochannelquality &lt;percent&gt;]
                            [--usbohci on|off]
                            [--usbehci on|off]
                            [--usbxhci on|off]
                            [--usbrename &lt;oldname&gt; &lt;newname&gt;]
                            [--snapshotfolder default|&lt;path&gt;]
                            [--teleporter on|off]
                            [--teleporterport &lt;port&gt;]
                            [--teleporteraddress &lt;address|empty&gt;]
                            [--teleporterpassword &lt;password&gt;]
                            [--teleporterpasswordfile &lt;file&gt;|stdin]
                            [--tracing-enabled on|off]
                            [--tracing-config &lt;config-string&gt;]
                            [--tracing-allow-vm-access on|off]
                            [--usbcardreader on|off]
                            [--autostart-enabled on|off]
                            [--autostart-delay &lt;seconds&gt;]
                            [--recording on|off]
                            [--recordingscreens all|&lt;screen ID&gt; [&lt;screen ID&gt; ...]]
                            [--recordingfile &lt;filename&gt;]
                            [--recordingvideores &lt;width&gt; &lt;height&gt;]
                            [--recordingvideorate &lt;rate&gt;]
                            [--recordingvideofps &lt;fps&gt;]
                            [--recordingmaxtime &lt;s&gt;]
                            [--recordingmaxsize &lt;MB&gt;]
                            [--recordingopts &lt;key=value&gt; [,&lt;key=value&gt; ...]]
                            [--defaultfrontend default|&lt;name&gt;]

PS C:\Program Files\Oracle\VirtualBox&gt;
</pre></div>
</div>
<hr class="docutils" />
</div>
</div>
<div class="section" id="vagrant-sample">
<span id="id5"></span><h2>Vagrantfile の設定例<a class="headerlink" href="#vagrant-sample" title="このヘッドラインへのパーマリンク">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 56%" />
<col style="width: 44%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>仮想マシン名</p></td>
<td><p>sample-vm</p></td>
</tr>
<tr class="row-even"><td><p>CPU</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-odd"><td><p>メモリ</p></td>
<td><p>4GB(4096MB)</p></td>
</tr>
<tr class="row-even"><td><p>ネットワーク接続</p></td>
<td><p>ブリッジ</p></td>
</tr>
<tr class="row-odd"><td><p>MAC アドレス</p></td>
<td><p>080027000001</p></td>
</tr>
<tr class="row-even"><td><p>ビデオカード</p></td>
<td><p>vmsvga</p></td>
</tr>
<tr class="row-odd"><td><p>コンソール</p></td>
<td><p>表示</p></td>
</tr>
<tr class="row-even"><td><p>ホスト名</p></td>
<td><p>node1</p></td>
</tr>
<tr class="row-odd"><td><p>IP アドレス</p></td>
<td><p>192.168.10.1</p></td>
</tr>
</tbody>
</table>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Vagrant.configure(&quot;2&quot;) do |config|
  config.vm.box = &quot;centos/7&quot;
  config.vm.network &quot;public_network&quot;, mac: &quot;080027000001&quot;, ip: &quot;192.168.10.1&quot;
  config.vm.hostname = &quot;node1&quot;
  config.vm.provider &quot;virtualbox&quot; do |vb|
    vb.gui = true
    vb.name = &quot;sample-vm&quot;
    vb.memory = &quot;4096&quot;
    vb.cpus = 2
    vb.customize [
      &quot;modifyvm&quot;, :id,
      &quot;--ioapic&quot;, &quot;on&quot;,
      &quot;--graphicscontroller&quot;, &quot;vmsvga&quot;
    ]
  end
end
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>PS C:\vagrant\my_centos&gt; vagrant up
Bringing machine &#39;default&#39; up with &#39;virtualbox&#39; provider...
==&gt; default: Importing base box &#39;centos/7&#39;...
==&gt; default: Matching MAC address for NAT networking...
==&gt; default: Checking if box &#39;centos/7&#39; version &#39;1905.1&#39; is up to date...
==&gt; default: Setting the name of the VM: sample-vm
==&gt; default: Clearing any previously set network interfaces...
==&gt; default: Preparing network interfaces based on configuration...
    default: Adapter 1: nat
    default: Adapter 2: bridged
==&gt; default: Forwarding ports...
    default: 22 (guest) =&gt; 2222 (host) (adapter 1)
==&gt; default: Running &#39;pre-boot&#39; VM customizations...
==&gt; default: Booting VM...
==&gt; default: Waiting for machine to boot. This may take a few minutes...
    default: SSH address: 127.0.0.1:2222
    default: SSH username: vagrant
    default: SSH auth method: private key
    default:
    default: Vagrant insecure key detected. Vagrant will automatically replace
    default: this with a newly generated keypair for better security.
    default:
    default: Inserting generated public key within guest...
    default: Removing insecure key from the guest if it&#39;s present...
    default: Key inserted! Disconnecting and reconnecting using new SSH key...
==&gt; default: Machine booted and ready!
==&gt; default: Checking for guest additions in VM...
    default: No guest additions were detected on the base box for this VM! Guest
    default: additions are required for forwarded ports, shared folders, host only
    default: networking, and more. If SSH fails on this machine, please install
    default: the guest additions and repackage the box to continue.
    default:
    default: This is not an error message; everything may continue to work properly,
    default: in which case you may ignore this message.
==&gt; default: Setting hostname...
==&gt; default: Configuring and enabling network interfaces...
==&gt; default: Rsyncing folder: /cygdrive/c/vagrant/my_centos/ =&gt; /vagrant
PS C:\vagrant\my_centos&gt;
PS C:\vagrant\my_centos&gt; vagrant ssh
[vagrant@node1 ~]$
[vagrant@node1 ~]$ hostname
node1
[vagrant@node1 ~]$
[vagrant@node1 ~]$ ip a
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host
       valid_lft forever preferred_lft forever
2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
    link/ether 52:54:00:8a:fe:e6 brd ff:ff:ff:ff:ff:ff
    inet 10.0.2.15/24 brd 10.0.2.255 scope global noprefixroute dynamic eth0
       valid_lft 86348sec preferred_lft 86348sec
    inet6 fe80::5054:ff:fe8a:fee6/64 scope link
       valid_lft forever preferred_lft forever
3: eth1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
    link/ether 08:00:27:00:00:01 brd ff:ff:ff:ff:ff:ff
    inet 192.168.10.1/24 brd 192.168.10.255 scope global noprefixroute eth1
       valid_lft forever preferred_lft forever
    inet6 fe80::a00:27ff:fe00:1/64 scope link
       valid_lft forever preferred_lft forever
[vagrant@node1 ~]$
[vagrant@node1 ~]$ free -h
              total        used        free      shared  buff/cache   available
Mem:           3.7G        106M        3.5G        8.5M        137M        3.4G
Swap:          2.0G          0B        2.0G
[vagrant@node1 ~]$
[vagrant@node1 ~]$ cat /proc/cpuinfo
processor       : 0
vendor_id       : GenuineIntel
cpu family      : 6
model           : 62
model name      : Intel(R) Core(TM) i7-4930K CPU @ 3.40GHz
stepping        : 4
microcode       : 0x19
cpu MHz         : 3402.072
cache size      : 12288 KB
physical id     : 0
siblings        : 2
core id         : 0
cpu cores       : 2
apicid          : 0
initial apicid  : 0
fpu             : yes
fpu_exception   : yes
cpuid level     : 13
wp              : yes
flags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx rdtscp lm constant_tsc rep_good nopl xtopology nonstop_tsc eagerfpu pni pclmulqdq ssse3 cx16 pcid sse4_1 sse4_2 x2apic popcnt aes xsave avx rdrand hypervisor lahf_lm fsgsbase flush_l1d
bogomips        : 6804.14
clflush size    : 64
cache_alignment : 64
address sizes   : 46 bits physical, 48 bits virtual
power management:

processor       : 1
vendor_id       : GenuineIntel
cpu family      : 6
model           : 62
model name      : Intel(R) Core(TM) i7-4930K CPU @ 3.40GHz
stepping        : 4
microcode       : 0x19
cpu MHz         : 3402.072
cache size      : 12288 KB
physical id     : 0
siblings        : 2
core id         : 1
cpu cores       : 2
apicid          : 1
initial apicid  : 1
fpu             : yes
fpu_exception   : yes
cpuid level     : 13
wp              : yes
flags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx rdtscp lm constant_tsc rep_good nopl xtopology nonstop_tsc eagerfpu pni pclmulqdq ssse3 cx16 pcid sse4_1 sse4_2 x2apic popcnt aes xsave avx rdrand hypervisor lahf_lm fsgsbase flush_l1d
bogomips        : 6804.14
clflush size    : 64
cache_alignment : 64
address sizes   : 46 bits physical, 48 bits virtual
power management:

[vagrant@node1 ~]$
[vagrant@node1 ~]$ logout
Connection to 127.0.0.1 closed.
PS C:\vagrant\my_centos&gt;
PS C:\vagrant\my_centos&gt; vagrant halt
==&gt; default: Attempting graceful shutdown of VM...
PS C:\vagrant\my_centos&gt;
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../provisioning/provisioning.html" class="btn btn-neutral float-right" title="プロビジョニング" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../vms/vms.html" class="btn btn-neutral float-left" title="デフォルトの仮想マシンの仕様" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Yoichi Muraoka

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>